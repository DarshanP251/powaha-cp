enum CpStatus {
  APPLIED
  ACTIVE
  REJECTED
}

enum CpApplicationStatus {
  SUBMITTED
  APPROVED
  REJECTED
}

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model community_partners {
  cp_id      String   @id
  name       String
  email      String   @unique // ðŸ”¥ ADD THIS
  mobile     String
  status     CpStatus
  aoo        Json?
  created_at DateTime @default(now())

  cp_applications cp_applications[]
}

model cp_applications {
  application_id   String              @id
  cp_id            String
  application_data Json
  status           CpApplicationStatus
  reviewed_by      String?
  reviewed_at      DateTime?
  created_at       DateTime            @default(now())

  cp community_partners @relation(fields: [cp_id], references: [cp_id])
}

model users {
  user_id    String    @id
  email      String    @unique
  password   String
  role       String
  cp_id      String?
  created_at DateTime?
}

model cp_leads {
  lead_id      String   @id
  cp_id        String
  church_name  String
  location     String
  stage        String
  notes        String?
  last_updated DateTime @default(now())

  @@map("cp_leads")
}

model incentives {
  incentive_id String @id
  cp_id        String
  lead_id      String
  amount       Int
  status       String

  @@unique([lead_id])
  @@map("incentives")
}

model incentive_config {
  key   String @id
  value Int
}
